import{m as b,p as U,q as Y,g as a,a as u,b as t,i as c,d as y,h as z,w,f as m,l as _,t as p,F as N,y as F,e as O,k,s as V,o as r,v as $,n as P}from"./app-Bb5dool3.js";import{_ as j,a as q}from"./Footer-BaLAyP1G.js";const D={class:"flex flex-col min-h-screen"},A={class:"bg-gray-100 py-4"},W={class:"max-w-[1000px] mx-auto px-6"},X={class:"flex items-center space-x-2 text-sm"},G={class:"text-gray-800 font-medium"},I={class:"w-full px-6 mx-auto max-w-[1000px] py-8"},J={class:"text-4xl py-4 md:text-5xl font-bold mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600"},K=["innerHTML"],Q={key:0},R=["innerHTML"],Z=["src"],ee={key:2,class:"flex flex-col items-center my-6 space-y-4"},te={class:"space-y-2 text-sm text-gray-700"},se={class:"flex items-center space-x-2"},le={class:"flex items-center space-x-2"},ne=["disabled"],oe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ae={class:"bg-white p-6 rounded-2xl shadow-lg w-96 relative"},re={key:0,class:"text-red-500 text-sm mt-1"},ie={key:0,class:"text-red-500 text-sm mt-1"},ce={__name:"Show",props:{product:Object},setup(i){const x=b(!1),f=b(!1),M=b(!1);let l=null,g=null,h=null;const E=o=>o?o.replace(/src="\/\/storage\//g,'src="/storage/'):"",d=b({name:"",phone:""}),n=b({name:"",phone:""}),H=()=>{M.value=!0},C=()=>{M.value=!1,d.value={name:"",phone:""},n.value={name:"",phone:""}},T=()=>{n.value={name:"",phone:""},d.value.name.trim()||(n.value.name="Введите имя"),/^\+?\d[\d\s\-\(\)]{9,}$/.test(d.value.phone)||(n.value.phone="Введите корректный номер телефона"),!n.value.name&&!n.value.phone&&C()},B=()=>{if(!l)return;const o=window.scrollY*.2;l.style.transform=`translateY(${o}px)`},S=o=>{if(!l)return;const{innerWidth:e,innerHeight:s}=window,L=(o.clientX/e-.5)*20,v=(o.clientY/s-.5)*20;l.style.transform=`translate(${L}px, ${v+window.scrollY*.2}px)`};return U(()=>{document.querySelectorAll(".web-bg").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),l=document.createElement("div"),l.classList.add("web-bg"),document.body.appendChild(l),g=B,h=S,window.addEventListener("scroll",g),window.addEventListener("mousemove",h)}),Y(()=>{l&&l.parentNode&&(l.parentNode.removeChild(l),l=null),g&&window.removeEventListener("scroll",g),h&&window.removeEventListener("mousemove",h)}),(o,e)=>(r(),a(N,null,[u(y(z),{title:i.product.title},null,8,["title"]),t("div",D,[u(j),t("nav",A,[t("div",W,[t("div",X,[u(y(_),{href:"/cat",class:"text-gray-500 hover:text-gray-700"},{default:w(()=>[...e[4]||(e[4]=[m("Категории",-1)])]),_:1}),e[5]||(e[5]=t("span",{class:"text-gray-400"},"/",-1)),u(y(_),{href:`/category/${i.product.category.slug}`,class:"text-gray-500 hover:text-gray-700"},{default:w(()=>[m(p(i.product.category.title),1)]),_:1},8,["href"]),e[6]||(e[6]=t("span",{class:"text-gray-400"},"/",-1)),t("span",G,p(i.product.title),1)])])]),t("main",I,[t("h1",J,p(i.product.title),1),t("div",{class:"product-description max-w-full mb-6",innerHTML:i.product.description},null,8,K),i.product.content_blocks?(r(),a("div",Q,[(r(!0),a(N,null,F(i.product.content_blocks,(s,L)=>(r(),a("div",{key:L,class:"mb-6"},[s.type==="text"?(r(),a("div",{key:0,class:"text-block",innerHTML:E(s.description)},null,8,R)):c("",!0),s.type==="image"&&s.image?(r(),a("img",{key:1,src:`/storage/${s.image}`,class:"mx-auto my-4 rounded-lg shadow-sm",style:{"max-width":"100%",height:"auto"}},null,8,Z)):c("",!0),s.type==="button"?(r(),a("div",ee,[t("div",te,[t("label",se,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=v=>x.value=v)},null,512),[[$,x.value]]),t("span",null,[e[8]||(e[8]=m("Я даю согласие на обработку данных в соответствии с ",-1)),u(y(_),{href:"/privacy",class:"text-blue-600 underline"},{default:w(()=>[...e[7]||(e[7]=[m("Политикой конфиденциальности",-1)])]),_:1})])]),t("label",le,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=v=>f.value=v)},null,512),[[$,f.value]]),t("span",null,[e[10]||(e[10]=m("Я принимаю условия ",-1)),u(y(_),{href:"/oferta",class:"text-blue-600 underline"},{default:w(()=>[...e[9]||(e[9]=[m("Договора оферты",-1)])]),_:1})])])]),t("button",{disabled:!x.value||!f.value,onClick:H,class:P(["inline-block w-full sm:w-auto px-10 py-3 text-lg font-semibold text-white text-center rounded-2xl shadow-md transition-all duration-300",{"bg-gray-400 cursor-not-allowed":!x.value||!f.value,"bg-blue-600 hover:bg-blue-700 hover:shadow-lg active:scale-95":x.value&&f.value}])},p(s.button_text),11,ne)])):c("",!0)]))),128))])):c("",!0)]),u(q)]),M.value?(r(),a("div",oe,[t("div",ae,[t("button",{onClick:C,class:"absolute top-2 right-3 text-gray-400 hover:text-gray-700 text-xl"},"×"),e[14]||(e[14]=t("h2",{class:"text-xl font-semibold mb-4 text-center"},"Введите данные для оплаты",-1)),t("form",{onSubmit:O(T,["prevent"]),class:"space-y-4"},[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Имя",-1)),k(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.value.name=s),type:"text",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"Введите имя"},null,512),[[V,d.value.name]]),n.value.name?(r(),a("p",re,p(n.value.name),1)):c("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Телефон",-1)),k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value.phone=s),type:"tel",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"+7 (___) ___-__-__"},null,512),[[V,d.value.phone]]),n.value.phone?(r(),a("p",ie,p(n.value.phone),1)):c("",!0)]),e[13]||(e[13]=t("button",{type:"submit",class:"w-full py-2 text-white bg-blue-600 rounded-xl font-semibold hover:bg-blue-700 transition"}," Оплатить ",-1))],32)])])):c("",!0)],64))}};export{ce as default};
